# GeoHub

ラスター・ベクタータイル対応の汎用地図ビューアー

## 特徴

- **MapLibre GL JS** ベースのモダンな地図ビューアー
- ラスタータイル・ベクタータイル対応
- 外部タイルサービス統合（地理院タイルなど）
- サーバーレスアーキテクチャ対応（S3 + CloudFront）
- データ可視化機能（グラフ・表表示、開発予定）

## 実装済み機能

### Phase 1: 基本機能
- ✅ MapLibre GL JS初期化
- ✅ 地理院タイル（標準地図）表示
- ✅ ナビゲーションコントロール
- ✅ スケール表示
- ✅ サイドパネル（開閉可能）

### Phase 2: UI強化（最新）
- ✅ 背景地図切り替えコントロール（地理院タイル3種）
- ✅ レイヤー管理システム
- ✅ レイヤーコントロールパネル（タブUI）
- ✅ レイヤー表示/非表示切り替え
- ✅ レイヤー透明度調整
- ✅ カスタムタイル読み込み準備

## プロジェクト構造

```
geohub/
├── index.html
├── package.json
├── vite.config.js
├── src/
│   ├── main.js                    # アプリケーションエントリーポイント
│   ├── map/
│   │   ├── mapInstance.js         # MapLibre GL JSインスタンス管理
│   │   ├── basemaps.js            # 背景地図定義（地理院タイル3種）
│   │   └── layerManager.js        # レイヤー管理
│   └── ui/
│       ├── panel.js               # サイドパネル制御
│       ├── basemapControl.js      # 背景地図切り替えコントロール
│       └── layerPanel.js          # レイヤーコントロールパネル
└── styles/
    ├── main.css                   # メインスタイル
    ├── panel.css                  # パネルスタイル
    ├── basemapControl.css         # 背景地図コントロールスタイル
    └── layerPanel.css             # レイヤーパネルスタイル
```

## セットアップ

### 必要環境

- Node.js（v18以上推奨）
- npm または yarn

### インストール

```bash
# 依存関係をインストール
npm install

# 開発サーバーを起動
npm run dev

# プロダクションビルド
npm run build

# プロダクションビルドのプレビュー
npm run preview
```

アプリケーションは `http://localhost:5173` で起動します

## 使い方

1. デフォルトで地理院地図（標準）が表示されます
2. 左上のナビゲーションコントロールでズーム・パン操作
3. 右上のドロップダウンで背景地図を切り替え（標準・淡色・写真）
4. 右上の📊ボタンでサイドパネルを開く
5. サイドパネルの「レイヤー」タブでレイヤー管理
6. サイドパネルの「データ」タブで地物情報を表示（将来実装）
7. ×ボタンでパネルを閉じる

## ロードマップ

### Phase 3: データ統合（予定）
- S3からのカスタムタイルデータ読み込み
- クリックイベントと地物データ抽出
- ベクタータイルサポート強化
- PMTilesフォーマット対応

### Phase 4: データ可視化（予定）
- 地物プロパティからのグラフ生成
- 属性データのテーブル表示
- データエクスポート機能

## 技術スタック

- **フロントエンド**: Vanilla JavaScript + Vite
- **地図ライブラリ**: MapLibre GL JS
- **ビルドツール**: Vite
- **スタイリング**: CSS（フレームワークなし）

## ライセンス

MIT
